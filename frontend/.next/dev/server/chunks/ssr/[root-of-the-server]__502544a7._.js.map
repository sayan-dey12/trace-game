{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///E:/personal/fun/consent-trace-app/frontend/pages/admin.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\n\r\nconst BACKEND = process.env.NEXT_PUBLIC_BACKEND || \"http://localhost:4000\";\r\n\r\nexport default function AdminPage() {\r\n  const [logged, setLogged] = useState(false);\r\n  const [u, setU] = useState(\"\");\r\n  const [p, setP] = useState(\"\");\r\n\r\n  const [events, setEvents] = useState<any[]>([]);\r\n  const [uploads, setUploads] = useState<any[]>([]);\r\n\r\n  async function login() {\r\n    const res = await fetch(`${BACKEND}/admin/login`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ user: u, pass: p })\r\n    });\r\n    const json = await res.json();\r\n    if (json.ok) {\r\n      setLogged(true);\r\n      loadData();\r\n    } else {\r\n      alert(\"Wrong admin login\");\r\n    }\r\n  }\r\n\r\n  async function loadData() {\r\n    const ev = await (await fetch(`${BACKEND}/admin/events`)).json();\r\n    const up = await (await fetch(`${BACKEND}/admin/uploads`)).json();\r\n    setEvents(ev);\r\n    setUploads(up);\r\n  }\r\n\r\n  if (!logged) {\r\n    return (\r\n      <main style={{ padding: 20 }}>\r\n        <h1>Admin Login</h1>\r\n        <input placeholder=\"username\" value={u} onChange={(e) => setU(e.target.value)} />\r\n        <br />\r\n        <input type=\"password\" placeholder=\"password\" value={p} onChange={(e) => setP(e.target.value)} />\r\n        <br />\r\n        <button onClick={login}>Login</button>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main style={{ padding: 20 }}>\r\n      <h1>Admin Panel</h1>\r\n\r\n      <h2>Events</h2>\r\n      <table border={1} cellPadding={6}>\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>IP</th>\r\n            <th>User Agent</th>\r\n            <th>City</th>\r\n            <th>Region</th>\r\n            <th>Country</th>\r\n            <th>Created</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {events.map((e) => (\r\n            <tr key={e.id}>\r\n              <td>{e.id}</td>\r\n              <td>{e.ip}</td>\r\n              <td>{e.user_agent}</td>\r\n              <td>{e.city}</td>\r\n              <td>{e.region}</td>\r\n              <td>{e.country}</td>\r\n              <td>{e.created_at}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      <h2>Uploads</h2>\r\n      <table border={1} cellPadding={6}>\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Image</th>\r\n            <th>IP</th>\r\n            <th>Latitude</th>\r\n            <th>Longitude</th>\r\n            <th>Created</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {uploads.map((u) => (\r\n            <tr key={u.id}>\r\n              <td>{u.id}</td>\r\n              <td>{u.cloudinary_url && (\r\n                <img src={u.cloudinary_url} width=\"140\" />\r\n              )}</td>\r\n              <td>{u.ip}</td>\r\n              <td>{u.latitude}</td>\r\n              <td>{u.longitude}</td>\r\n              <td>{u.created_at}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}